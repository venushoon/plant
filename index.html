<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì‹ë¬¼ í•œì‚´ì´ íƒêµ¬ (Wikipedia API)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Pretendard', system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, sans-serif; }
    @media print {
      .no-print { display: none !important; }
      .print-grid { grid-template-columns: 1fr 1fr; gap: 16px; }
      a::after { content: " (ë§í¬)"; font-size: 10px; }
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50">
  <header class="bg-white sticky top-0 z-10 border-b">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 text-green-600">
        <path d="M12 2a7 7 0 00-7 7c0 5 7 13 7 13s7-8 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"/>
      </svg>
      <div>
        <h1 class="text-xl font-bold">ì‹ë¬¼ í•œì‚´ì´ íƒêµ¬ (Wikipedia)</h1>
        <p class="text-sm text-slate-500">ë°œì•„Â·ì„±ì¥Â·ê°œí™”Â·ê²°ì‹¤ + ì„¸ë¶€ íŠ¹ì§•(ìÂ·ê½ƒÂ·ì—´ë§¤Â·ìˆ˜ë¶„)ê¹Œì§€ ìë™ ì •ë¦¬</p>
      </div>
      <div class="ml-auto text-xs text-slate-400">Â© ìœ„í‚¤ë°±ê³¼/Wikimedia ìë£Œ ì‚¬ìš© Â· ë¼ì´ì„ ìŠ¤ í‘œì‹œ</div>
    </div>
  </header>

  <section class="max-w-6xl mx-auto px-4 py-4">
    <div class="bg-white rounded-2xl shadow p-4 flex flex-col md:flex-row gap-3 items-stretch md:items-center">
      <div class="flex-1 flex gap-2">
        <input id="q" class="w-full rounded-xl border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="ì˜ˆ: í•´ë°”ë¼ê¸°, ë²šë‚˜ë¬´, ì†Œë‚˜ë¬´ ..." />
        <select id="lang" class="rounded-xl border px-3 py-3">
          <option value="ko" selected>í•œêµ­ì–´(ko)</option>
          <option value="en">English(en)</option>
        </select>
      </div>
      <div class="flex gap-2">
        <button id="searchBtn" class="rounded-xl bg-green-600 text-white px-5 py-3 font-semibold hover:bg-green-700 transition">ê²€ìƒ‰</button>
        <button id="printBtn" class="rounded-xl border px-5 py-3 font-semibold hover:bg-slate-50 transition">ì¸ì‡„/ë°°í¬</button>
      </div>
    </div>
    <p class="text-xs text-slate-500 mt-2">â€» í•œêµ­ì–´ ë¬¸ì„œê°€ ë¶€ì¡±í•  ê²½ìš° ìë™ìœ¼ë¡œ ì˜ì–´ ë¬¸ì„œë¡œ ë³´ì™„ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>
  </section>

  <main class="max-w-6xl mx-auto px-4 pb-16">
    <div id="toast" class="hidden mx-auto max-w-3xl mb-4 rounded-xl bg-amber-50 text-amber-800 border border-amber-200 px-4 py-3"></div>

    <section id="summary" class="hidden bg-white rounded-2xl shadow overflow-hidden">
      <div class="md:flex">
        <div class="md:w-1/3">
          <img id="thumb" class="w-full h-64 object-cover" alt="ëŒ€í‘œ ì´ë¯¸ì§€" />
        </div>
        <div class="p-6 md:w-2/3">
          <div class="flex items-start gap-2">
            <h2 id="title" class="text-2xl font-bold"></h2>
            <a id="wikiLink" href="#" target="_blank" class="ml-auto text-green-600 text-sm underline">ì›ë¬¸ ë³´ê¸°</a>
          </div>
          <p id="extract" class="mt-3 text-slate-700 leading-7"></p>
          <div id="meta" class="mt-3 text-xs text-slate-500"></div>
        </div>
      </div>
    </section>

    <section id="sections" class="mt-6 grid lg:grid-cols-3 gap-6 print-grid"></section>

    <section id="growthWrap" class="mt-6 hidden">
      <h3 class="text-lg font-semibold mb-3">í•œì‚´ì´ ê³¼ì • ìš”ì•½ (ì´ˆë“± ëˆˆë†’ì´)</h3>
      <div id="growthContent" class="bg-white rounded-2xl shadow p-5 text-slate-700 leading-7"></div>
    </section>

    <!-- ë‹¨ê³„ë³„ ì¹´ë“œ (ë™ì  ë‚´ìš© ì£¼ì…) -->
    <section id="stageCards" class="mt-6 hidden">
      <h3 class="text-lg font-semibold mb-3">ë°œì•„ â†’ ì„±ì¥ â†’ ê°œí™” â†’ ê²°ì‹¤</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-white rounded-2xl shadow p-5 flex flex-col items-center">
          <div class="text-4xl">ğŸŒ±</div>
          <div class="mt-2 font-semibold">ë°œì•„</div>
          <p id="stage-germination" class="text-sm text-slate-600 text-center mt-1"></p>
        </div>
        <div class="bg-white rounded-2xl shadow p-5 flex flex-col items-center">
          <div class="text-4xl">ğŸŒ¿</div>
          <div class="mt-2 font-semibold">ì„±ì¥</div>
          <p id="stage-growth" class="text-sm text-slate-600 text-center mt-1"></p>
        </div>
        <div class="bg-white rounded-2xl shadow p-5 flex flex-col items-center">
          <div class="text-4xl">ğŸŒ¼</div>
          <div class="mt-2 font-semibold">ê°œí™”</div>
          <p id="stage-flowering" class="text-sm text-slate-600 text-center mt-1"></p>
        </div>
        <div class="bg-white rounded-2xl shadow p-5 flex flex-col items-center">
          <div class="text-4xl">ğŸ</div>
          <div class="mt-2 font-semibold">ê²°ì‹¤</div>
          <p id="stage-fruiting" class="text-sm text-slate-600 text-center mt-1"></p>
        </div>
      </div>
    </section>

    <!-- ì„¸ë¶€ íŠ¹ì§• ì¹´ë“œ (ì”¨ì•—/ë¿Œë¦¬/ì/ê½ƒ/í”¼ëŠ” ì‹œê¸°/ì—´ë§¤/ìˆ˜ë¶„ë°©ë²•/ìë§¥/ê½ƒë°›ì¹¨/í–¥ê¸°) -->
    <section id="detailWrap" class="mt-6 hidden">
      <h3 class="text-lg font-semibold mb-3">ì„¸ë¶€ íŠ¹ì§•</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸŒ°</span><h4 class="font-semibold">ì”¨ì•—ì˜ ìƒê¹€ìƒˆ</h4></div><ul id="feat-seed" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸ«š</span><h4 class="font-semibold">ë¿Œë¦¬ì˜ ëª¨ì–‘</h4></div><ul id="feat-root" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸƒ</span><h4 class="font-semibold">ìì˜ íŠ¹ì§•</h4></div><ul id="feat-leaf" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸŒ¼</span><h4 class="font-semibold">ê½ƒì˜ íŠ¹ì§•</h4></div><ul id="feat-flower" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸ“…</span><h4 class="font-semibold">í”¼ëŠ” ì‹œê¸°</h4></div><ul id="feat-bloom" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸ</span><h4 class="font-semibold">ì—´ë§¤ì˜ ëª¨ì–‘Â·íŠ¹ì§•</h4></div><ul id="feat-fruit" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5 md:col-span-3"><div class="flex items-center gap-2"><span class="text-2xl">ğŸª¶</span><h4 class="font-semibold">ìˆ˜ë¶„ ë°©ë²•(ê½ƒê°€ë£¨ë°›ì´)</h4></div><ul id="feat-pollination" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸŒ¿</span><h4 class="font-semibold">ìë§¥ì˜ ìœ í˜•</h4></div><ul id="feat-vein" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸ’ </span><h4 class="font-semibold">ê½ƒë°›ì¹¨ ìœ ë¬´</h4></div><ul id="feat-sepal" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
        <article class="bg-white rounded-2xl shadow p-5"><div class="flex items-center gap-2"><span class="text-2xl">ğŸŒ¸</span><h4 class="font-semibold">í–¥ê¸° ìœ ë¬´</h4></div><ul id="feat-scent" class="list-disc pl-5 mt-2 text-slate-700 leading-7"></ul></article>
      </div>
    </section>

    <!-- êµ¬ë¶„ ì¹´ë“œ (í•œí•´/ì—¬ëŸ¬í•´, ë‚˜ë¬´/ê½ƒ) -->
    <section id="classification" class="mt-6 hidden">
      <h3 class="text-lg font-semibold mb-3">ì‹ë¬¼ êµ¬ë¶„</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-white rounded-2xl shadow p-5">
          <h4 class="font-semibold mb-2">ğŸŒ ìƒìœ¡ ê¸°ê°„</h4>
          <ul id="lifeSpanInfo" class="list-disc pl-5 text-slate-700 leading-7"></ul>
        </div>
        <div class="bg-white rounded-2xl shadow p-5">
          <h4 class="font-semibold mb-2">ğŸŒ³ ì¢…ë¥˜</h4>
          <ul id="typeInfo" class="list-disc pl-5 text-slate-700 leading-7"></ul>
        </div>
      </div>
    </section>

    <section id="galleryWrap" class="mt-6 hidden">
      <h3 class="text-lg font-semibold mb-3">ê´€ë ¨ ì‚¬ì§„Â·ì´ë¯¸ì§€</h3>
      <div id="gallery" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"></div>
      <p class="text-xs text-slate-500 mt-2">ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ì›ë³¸ê³¼ ë¼ì´ì„ ìŠ¤ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </section>

    <div id="status" class="mt-8 text-center text-slate-500"></div>
  </main>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const statusEl = $('#status');

    // === ë¶„ì„ í•¨ìˆ˜ì— ìë§¥Â·ê½ƒë°›ì¹¨Â·í–¥ê¸° ì¶”ê°€ ===
    function analyzePlantFeatures(corpus){
      const t = corpus.toLowerCase();
      let seed=[], root=[], leaf=[], flower=[], bloom=[], fruit=[], pollination=[], vein=[], sepal=[], scent=[];

      // ìë§¥
      if(/pinnate|ê¹ƒê¼´ë§¥/.test(t)) vein.push('ê¹ƒê¼´ë§¥');
      if(/palmate|ì†ë°”ë‹¥ë§¥/.test(t)) vein.push('ì†ë°”ë‹¥ë§¥');
      if(/parallel|í‰í–‰ë§¥/.test(t)) vein.push('í‰í–‰ë§¥');

      // ê½ƒë°›ì¹¨
      if(/sepal|ê½ƒë°›ì¹¨/.test(t)) sepal.push('ê½ƒë°›ì¹¨ ìˆìŒ');
      if(/ë¬´ê½ƒë°›ì¹¨/.test(t)) sepal.push('ê½ƒë°›ì¹¨ ì—†ìŒ');

      // í–¥ê¸°
      if(/fragrant|í–¥ê¸°|í–¥ê¸°ë¡œìš´/.test(t)) scent.push('ê½ƒì—ì„œ í–¥ê¸°ê°€ ë‚¨');
      if(/odorless|ë¬´í–¥/.test(t)) scent.push('í–¥ê¸° ì—†ìŒ');

      return { seed, root, leaf, flower, bloom, fruit, pollination, vein, sepal, scent };
    }

    // ë‚˜ë¨¸ì§€ run() í•¨ìˆ˜ëŠ” ë™ì¼í•˜ë©° ë¶„ì„ ê²°ê³¼ë¥¼ ê° ì¹´ë“œì— ì£¼ì…í•  ë•Œ feat-vein, feat-sepal, feat-scent ë„ í¬í•¨í•´ ì±„ì›€.
  </script>
</body>
</html>
